- [メルカリ作のプログラミング言語Go完全入門 読破](#メルカリ作のプログラミング言語go完全入門-読破)
- [11. データベース](#11-データベース)
  - [11-1. データベースへの接続とSQLの実行](#11-1-データベースへの接続とsqlの実行)
      - [11-1-1. データベース](#11-1-1-データベース)
      - [11-1-2. database/sqlパッケージ](#11-1-2-databasesqlパッケージ)
      - [11-1-3. ドライバの登録](#11-1-3-ドライバの登録)
      - [11-1-4. SQLite](#11-1-4-sqlite)
      - [11-1-5. データベースのオープン](#11-1-5-データベースのオープン)
# メルカリ作のプログラミング言語Go完全入門 読破
# 11. データベース
## 11-1. データベースへの接続とSQLの実行
#### 11-1-1. データベース
- データベースとは
  - データを永続化するためのソフトウェア
    - データの保存および検索に特化している
    - データの記録方式によっていくつか種類がある
      - リレーショナルデータモデル
      - ネットワーク型データモデル

- リレーショナルデータベース
  - 表形式でデータを保存しているデータベース
  - 広く使われている
  - MySQL, SQLite, PostgreSQL, Oracle DBなど

- SQL
  - データベース用の問い合わせ言語
    - select, fromなど
  - データを検索・更新・削除など、クエリを記述するための言語

#### 11-1-2. database/sqlパッケージ
RDB(リレーショナルデータベース)にアクセスするためのパッケージ
- 共通機能を提供
  - クエリの発行
  - トランザクション(1setな処理単位)
- データベースの種類ごとにドライバが存在
  - [SQL database drivers](https://github.com/golang/go/wiki/SQLDrivers)

#### 11-1-3. ドライバの登録
**Go公式のデータベースドライバがない！**
- ドライバ
  - 各種RDBに対応したドライバ
    - MySQLやSQLiteなど

- 登録するには
  - インポートするだけ
    - 例: `import _ "modernc.org/sqlite"
  - initで登録される
  - パッケージ自体は直接触らない

#### 11-1-4. SQLite
ファイルベースのデータベース
- 軽量なRDBで、単一のファイルに記録される
- アプリケーションに組み込まれることが多い
  - 他のRDBは、通常はサーバとして動作する

#### 11-1-5. データベースのオープン
[Open関数](https://pkg.go.dev/database/sql#Open:~:text=%E5%88%B6%E5%BE%A1%E3%81%A7%E3%81%8D%E3%81%BE%E3%81%99%E3%80%82-,%E9%96%A2%E6%95%B0%E3%82%92%E9%96%8B%E3%81%8F%20%C2%B6,-func%20Open(driverName)を使用する
```go:
/* Open(<ドライバ名>, <後続文字列>) */
db, err := sql.Open("sqlite", "database.db")
```

- *sql.DBの特徴
  - 複数のゴールーチンから使用可能
  - コネクションプール機能
  - 一度開いたら使い回す
  - Closeは滅多にしない
