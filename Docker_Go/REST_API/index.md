# DockerでGoを動かす
## 1. 要件
1. マルチステージングビルドを使用する
2. 動かすプログラムは「REST API」

## 2. REST API
#### 2-1. RESTとは何か？
**シンプルなWebシステムの設計思想**のこと

**RE**presentational **S**tate **T**ransfer
(リプレゼンテーショナル・ステイト・トランスファー)
の略で、
- REpresentational -> 具象化された
- State -> 状態
- Transfer -> 転送

つまり、「**具体的に状態を定義した情報のやり取り**」のような意味合いで受け取れます。
また、REST APIとRESTful APIは広義ではほぼ同じと考えて問題ないのでここは深掘らないことにする。

#### 2-2. リソース指向アーキテクチャ(ROA)
調べていくうちに以下の一文が目に留まりました。

**ROAはRESTful APIを実装する上で問題を解決してくれるアーキテクチャでもある。言い換えるとRESTful APIはROAの実装ということになる(ROAに則りRESTful APIは実装されている)**

冒頭でも書きましたが、RESTというのはあくまでも**思想設計**であるということで、RESTアーキテクチャというものが存在するわけではありません。
よく目にするのが**RESTの4原則**です。

個人的にはROAの概念と特性を実装することでRESTful APIが実装できると考えた方が自然でした。

#### 2-3. ROAとは
**それ自体を参照するに値するもの**を「リソース」として定義し、リソースを中心に考えるアーキテクチャのこと。
- リソースという概念
- リソースはURIを持つ
- リソースに対する操作
- リソースの表現形式
というように、ROAの中心はあくまでリソースになる。

[RESTful Webサービス](https://www.oreilly.co.jp/books/9784873113531/)で初めて提唱された。

## 3. ROAの4つの概念
1. リソース
2. 名前
3. 表現
4. リソース間のリンク

#### 3-1. リソース
**Web上に存在する情報、データのこと**
リソースという言葉自体で調べると、「資源全般を指すが、さらに**目的達成に必要な要素、役に立つ要素のこと**」を指しています。

リソースは名詞で定義される。
リソース自体を参照するに値するほどの重要性を持っている。
例えば: ドキュメント、データベースの行など, 以下リソース例
- ソフトウェアリリースのバージョン(1.0.3のような数値)
- 猫に関する情報
- 天気予報
- 1024の次の素数

#### 3-2. URI
リソースは少なくとも1つのURIを持っていなければならない。なぜならリソースはURIを通じて提唱されるから。

**URIを持たない情報はリソースではない**
URIを持たない情報は他のリソースを説明するただのデータ。

- URIを持つリソースのイメージ
広告にURIを掲載する。その広告を見た人がブラウザにURIを打ち込む。そうすると広告主が表示したいと考えていたリソースが表示される。

#### 3-2-1. URIは記述的であるべき
**URIとリソースは直感的に対応させた方が良い**
さらに、**URIは構造的で、かつその構造は予測可能な方法で区別されること**が好ましい。

- 良くない例
1. 猫の情報を調べる
`/search/cat`にアクセスする
2. ネズミについて調べる
`/i-want-to-know-about/Mice`にアクセスする

このようにURIの名前に統一間がなく、直感的ではない。
猫で`/search/cat`にしたのなら、ネズミでも`/search/mouse`とするべきである。

#### 3-2-2. URIとリソースの関係
**定義上**、2つのリソースが同じであることはありえない。
あるとすれば、2つの異なるリソースが同じデータをポイントすること。

1. `/software/releases/1.0.3.zip`
2. `/software/releases/latest.zip`
このように、上の2つはしばらくの間は同じファイルを指している。(latest -> 最新の)
しかし、この2つのURIの目的は異なる。
1は常に`1.0.3`というバージョンを指すのに対して、2はクライアントがアクセスした時点での最新バージョンをポイントする。つまり、2はある段階で1を指すことではなくなるということ。

この場合、これは2つが同じリソースだ！とならない。1つのリソース(ここでいう1)に2が結びついたという事と捉える。

リソースはURIを1つ以上持つ事ができるために、起こる事で、結びつくURIが増えるたびにURIの価値が希薄化する。
これを回避する方法の1つが、**1つを正規URIにし、正規URIに結びつくURIはサポートするもの**とすることです。

例えば、クライアントが正規URIをリクエストしたら200(OK)とともに適切なデータを送る。
正規でないURIにリクエストしたら正規URIととともに303(See Other)を送信する。
こうすることで正規URIにリダイレクトさせることができる。
## 4. ROAの4つの特性
1. アドレス可能性
2. ステートレス性
3. 接続性
4. 統一インターフェース
